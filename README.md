<!-- 
  ** DO NOT EDIT THIS FILE
  ** 
  ** This file was automatically generated. 
  ** 1) Make all changes to `README.yaml` 
  ** 2) Run `make init` (you only need to do this once)
  ** 3) Run`make readme` to rebuild this file. 
  -->
[![README Header][readme_header_img]][readme_header_link]

[![cloudopsworks][logo]](https://cloudops.works/)

# Terraform ACM Certificate Management




AWS Certificate Manager (ACM) Terraform module for comprehensive SSL/TLS certificate management supporting external (DNS validated), imported (from existing certificates), and internal (Private CA) certificate types. Features include cross-account certificate management, local and external DNS validation, automatic validation record creation, and configurable certificate options for transparency and exportability.


---

This project is part of our comprehensive approach towards DevOps Acceleration. 
[<img align="right" title="Share via Email" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/ios-mail.svg"/>][share_email]
[<img align="right" title="Share on Google+" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-googleplus.svg" />][share_googleplus]
[<img align="right" title="Share on Facebook" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-facebook.svg" />][share_facebook]
[<img align="right" title="Share on Reddit" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-reddit.svg" />][share_reddit]
[<img align="right" title="Share on LinkedIn" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-linkedin.svg" />][share_linkedin]
[<img align="right" title="Share on Twitter" width="24" height="24" src="https://docs.cloudops.works/images/ionicons/logo-twitter.svg" />][share_twitter]


[![Terraform Open Source Modules](https://docs.cloudops.works/images/terraform-open-source-modules.svg)][terraform_modules]



It's 100% Open Source and licensed under the [APACHE2](LICENSE).







We have [*lots of terraform modules*][terraform_modules] that are Open Source and we are trying to get them well-maintained!. Check them out!






## Introduction

This Terraform module provides a comprehensive solution for managing SSL/TLS certificates in AWS Certificate Manager (ACM). The module offers:

Certificate Types:
- External certificates with automated DNS validation
- Imported certificates from external sources (using AWS Secrets Manager)
- Internal certificates using AWS Private Certificate Authority

Key Features:
- Cross-account certificate management with dedicated provider configuration
- Automatic DNS validation record creation in Route53
- Support for both local and external DNS zones
- Multiple domain validation with SAN support
- Configurable certificate transparency logging
- Certificate exportability options
- Early renewal configuration for internal certificates

## Usage


**IMPORTANT:** The `master` branch is used in `source` just as an example. In your code, do not pin to `master` because there may be breaking changes between releases.
Instead pin to the release tag (e.g. `?ref=vX.Y.Z`) of one of our [latest releases](https://github.com/cloudopsworks/terraform-module-aws-acm-certificate/releases).


Module Configuration Variables:

```yaml
create:
  description: "Flag to control resource creation"
  type: bool
  default: true

certificate_type:
  description: "Type of certificate (external/imported/internal)"
  type: string
  required: true

domain_zone:
  description: "Main domain zone for the certificate"
  type: string
  required: true

domain_alias:
  description: "Subdomain prefix for the certificate"
  type: string
  default: ""

domain_alternates:
  description: "List of Subject Alternative Names (SANs)"
  type: list(string)
  default: []

cross_account:
  description: "Enable cross-account certificate management"
  type: bool
  default: false

external_dns_zone:
  description: "Flag for external DNS zone management"
  type: bool
  default: false

imported_cert_secret_name:
  description: "AWS Secrets Manager secret name for imported certificate"
  type: string
  default: ""

internal_ca_arn:
  description: "ARN of Private Certificate Authority for internal certificates"
  type: string
  default: ""

early_renewal_days:
  description: "Number of days before certificate expiry to trigger renewal"
  type: number
  default: 0

options:
  description: "Certificate configuration options"
  type: map
  default: {}
  fields:
    certificate_transparency:
      description: "Enable/disable certificate transparency logging"
      type: bool
    exportable:
      description: "Enable/disable certificate export capability"
      type: bool
```

Terragrunt Configuration:
```hcl
include {
  path = find_in_parent_folders()
}

terraform {
  source = "git::https://github.com/cloudopsworks/terraform-module-aws-acm-certificate.git?ref=v1.0.0"
}


# Generate global cross_account provider block
generate "provider_l" {
  path = "provider.l.tf"
  #   disable     = !local.cross_account
  if_exists   = "overwrite_terragrunt"
  if_disabled = "remove_terragrunt"
  contents    = <<EOF
  provider "aws" {
    alias = "${local.cross_account_alias}"
    region = "${local.cross_account_region}"
    assume_role {
      role_arn     = "${local.cross_account_sts_role_arn}"
      session_name = "terragrunt"
    }
  }
  EOF
}

inputs = {
  certificate_type = "external"
  domain_zone     = "example.com"
  domain_alias    = "app"
  domain_alternates = ["*.app.example.com"]

  options = {
    certificate_transparency = true
    exportable = false
  }
}
```

## Quick Start

1. Create a Terragrunt configuration file (terragrunt.hcl):
   ```hcl
   include {
     path = find_in_parent_folders()
   }

   terraform {
     source = "git::https://github.com/cloudopsworks/terraform-module-aws-acm-certificate.git?ref=v1.0.0"
   }

   inputs = {
     certificate_type = "external"
     domain_zone     = "example.com"
     domain_alias    = "app"
     domain_alternates = ["*.app.example.com"]

     options = {
       certificate_transparency = true
       exportable = false
     }
   }
   ```

2. For cross-account setup, configure the provider (provider.tf):
   ```hcl
   provider "aws" {
     alias = "cross_account"
     assume_role {
       role_arn = "arn:aws:iam::ACCOUNT_ID:role/CrossAccountRole"
     }
   }
   ```

3. Initialize Terragrunt:
   ```bash
   terragrunt init
   ```

4. Review the planned changes:
   ```bash
   terragrunt plan
   ```

5. Apply the configuration:
   ```bash
   terragrunt apply
   ```

6. Monitor certificate status:
   - For external certificates: Check Route53 for validation records
   - For imported certificates: Verify secret in Secrets Manager
   - For internal certificates: Monitor Private CA for issuance


## Examples

External Certificate with Local DNS Validation:
```hcl
module "external_certificate" {
  source = "cloudopsworks/terraform-module-aws-acm-certificate"

  certificate_type = "external"
  domain_zone     = "example.com"
  domain_alias    = "api"
  domain_alternates = ["*.api.example.com"]
  cross_account   = false
  external_dns_zone = false

  options = {
    certificate_transparency = true
    exportable = false
  }
}
```

Cross-Account Certificate:
```hcl
module "cross_account_cert" {
  source = "cloudopsworks/terraform-module-aws-acm-certificate"
  providers = {
    aws.cross_account = aws.dns_account
  }

  certificate_type = "external"
  domain_zone     = "example.com"
  domain_alias    = "app"
  cross_account   = true
  domain_alternates = ["api.example.com"]

  options = {
    certificate_transparency = true
    exportable = true
  }
}
```

Imported Certificate from Secrets Manager:
```hcl
module "imported_cert" {
  source = "cloudopsworks/terraform-module-aws-acm-certificate"

  certificate_type = "imported"
  domain_zone     = "example.com"
  imported_cert_secret_name = "imported/wildcard-cert"

  options = {
    certificate_transparency = false
    exportable = true
  }
}
```

Internal Certificate with Private CA:
```hcl
module "internal_cert" {
  source = "cloudopsworks/terraform-module-aws-acm-certificate"

  certificate_type = "internal"
  domain_zone     = "internal.example.com"
  domain_alias    = "service"
  internal_ca_arn = "arn:aws:acm-pca:region:account:certificate-authority/12345678-1234-1234-1234-123456789012"
  early_renewal_days = 30

  options = {
    certificate_transparency = false
    exportable = true
  }
}
```



## Makefile Targets
```
Available targets:

  help                                Help screen
  help/all                            Display help for all targets
  help/short                          This help short screen
  lint                                Lint terraform/opentofu code
  tag                                 Tag the current version

```
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.3 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | ~> 6.4 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | ~> 6.4 |
| <a name="provider_aws.cross_account"></a> [aws.cross\_account](#provider\_aws.cross\_account) | ~> 6.4 |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_tags"></a> [tags](#module\_tags) | cloudopsworks/tags/local | 1.0.9 |

## Resources

| Name | Type |
|------|------|
| [aws_acm_certificate.imported](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acm_certificate) | resource |
| [aws_acm_certificate.internal](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acm_certificate) | resource |
| [aws_acm_certificate.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acm_certificate) | resource |
| [aws_acm_certificate_validation.cross_cert_validation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acm_certificate_validation) | resource |
| [aws_acm_certificate_validation.local_cert_validation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/acm_certificate_validation) | resource |
| [aws_route53_record.cross_cert_validation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record) | resource |
| [aws_route53_record.local_cert_validation](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/route53_record) | resource |
| [aws_acmpca_certificate_authority.private_ca](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/acmpca_certificate_authority) | data source |
| [aws_region.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region) | data source |
| [aws_route53_zone.cross_zone](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/route53_zone) | data source |
| [aws_route53_zone.local_zone](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/route53_zone) | data source |
| [aws_secretsmanager_secret.imported](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/secretsmanager_secret) | data source |
| [aws_secretsmanager_secret_version.imported](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/secretsmanager_secret_version) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_alerts"></a> [alerts](#input\_alerts) | Enable alerts for ACM certificate | <pre>object({<br/>    enabled       = optional(bool, false)<br/>    priority      = optional(number, 3)<br/>    sns_topic_arn = optional(string, "")<br/>  })</pre> | `{}` | no |
| <a name="input_certificate_type"></a> [certificate\_type](#input\_certificate\_type) | The type of ACM certificate to create, either 'internal', 'external' or 'imported'. Defaults to 'external'. | `string` | `"external"` | no |
| <a name="input_create"></a> [create](#input\_create) | Flag to create the ACM certificate. Defaults to true. | `bool` | `true` | no |
| <a name="input_cross_account"></a> [cross\_account](#input\_cross\_account) | The cross account to use for the Certificate domain, aws.cross\_account provider must be set to module. | `bool` | `false` | no |
| <a name="input_domain_alias"></a> [domain\_alias](#input\_domain\_alias) | The domain alias to use for the Certificate domain | `string` | `""` | no |
| <a name="input_domain_alternates"></a> [domain\_alternates](#input\_domain\_alternates) | The domain alternate aliases to use for the Certificate domain | `list(string)` | `[]` | no |
| <a name="input_domain_zone"></a> [domain\_zone](#input\_domain\_zone) | The domain zone to use for the Certificate domain zone | `string` | `"example.com"` | no |
| <a name="input_early_renewal_days"></a> [early\_renewal\_days](#input\_early\_renewal\_days) | The duration in days before the certificate expires to start early renewal, only available for internal Certs. Defaults to 30 days. | `string` | `0` | no |
| <a name="input_external_dns_zone"></a> [external\_dns\_zone](#input\_external\_dns\_zone) | (optional) allows the module work with external record validation out of Route53, defaults to false | `bool` | `false` | no |
| <a name="input_extra_tags"></a> [extra\_tags](#input\_extra\_tags) | n/a | `map(string)` | `{}` | no |
| <a name="input_imported_cert_secret_name"></a> [imported\_cert\_secret\_name](#input\_imported\_cert\_secret\_name) | The name of the secret in AWS Secrets Manager where the imported certificate is stored. | `string` | `""` | no |
| <a name="input_internal_ca_arn"></a> [internal\_ca\_arn](#input\_internal\_ca\_arn) | The ARN of the internal CA to use for the Certificate domain, if not provided, a new CA will be created. | `string` | `""` | no |
| <a name="input_is_hub"></a> [is\_hub](#input\_is\_hub) | Establish this is a HUB or spoke configuration | `bool` | `false` | no |
| <a name="input_name"></a> [name](#input\_name) | The name of the ACM certificate module, used for naming resources. | `string` | `""` | no |
| <a name="input_name_prefix"></a> [name\_prefix](#input\_name\_prefix) | The prefix for the ACM certificate module, used for naming resources. | `string` | `"managed-cert"` | no |
| <a name="input_options"></a> [options](#input\_options) | Additional options for the ACM certificate, such as tags and validation methods. | `any` | `{}` | no |
| <a name="input_org"></a> [org](#input\_org) | n/a | <pre>object({<br/>    organization_name = string<br/>    organization_unit = string<br/>    environment_type  = string<br/>    environment_name  = string<br/>  })</pre> | n/a | yes |
| <a name="input_private_zone"></a> [private\_zone](#input\_private\_zone) | Required to search the Route53 zone in a private zone. Defaults to false | `bool` | `false` | no |
| <a name="input_spoke_def"></a> [spoke\_def](#input\_spoke\_def) | n/a | `string` | `"001"` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_acm_certificate_arn"></a> [acm\_certificate\_arn](#output\_acm\_certificate\_arn) | n/a |
| <a name="output_acm_certificate_expire_date"></a> [acm\_certificate\_expire\_date](#output\_acm\_certificate\_expire\_date) | n/a |
| <a name="output_acm_certificate_renewal_elegibility"></a> [acm\_certificate\_renewal\_elegibility](#output\_acm\_certificate\_renewal\_elegibility) | n/a |
| <a name="output_acm_certificate_status"></a> [acm\_certificate\_status](#output\_acm\_certificate\_status) | n/a |
| <a name="output_acm_certificate_validation_options"></a> [acm\_certificate\_validation\_options](#output\_acm\_certificate\_validation\_options) | n/a |



## Help

**Got a question?** We got answers. 

File a GitHub [issue](https://github.com/cloudopsworks/terraform-module-aws-acm-certificate/issues), send us an [email][email] or join our [Slack Community][slack].

[![README Commercial Support][readme_commercial_support_img]][readme_commercial_support_link]

## DevOps Tools

## Slack Community


## Newsletter

## Office Hours

## Contributing

### Bug Reports & Feature Requests

Please use the [issue tracker](https://github.com/cloudopsworks/terraform-module-aws-acm-certificate/issues) to report any bugs or file feature requests.

### Developing




## Copyrights

Copyright © 2024-2025 [Cloud Ops Works LLC](https://cloudops.works)





## License 

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0) 

See [LICENSE](LICENSE) for full details.

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      https://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.









## Trademarks

All other trademarks referenced herein are the property of their respective owners.

## About

This project is maintained by [Cloud Ops Works LLC][website]. 


### Contributors

|  [![Cristian Beraha][berahac_avatar]][berahac_homepage]<br/>[Cristian Beraha][berahac_homepage] |
|---|

  [berahac_homepage]: https://github.com/berahac
  [berahac_avatar]: https://github.com/berahac.png?size=50

[![README Footer][readme_footer_img]][readme_footer_link]
[![Beacon][beacon]][website]

  [logo]: https://cloudops.works/logo-300x69.svg
  [docs]: https://cowk.io/docs?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=docs
  [website]: https://cowk.io/homepage?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=website
  [github]: https://cowk.io/github?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=github
  [jobs]: https://cowk.io/jobs?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=jobs
  [hire]: https://cowk.io/hire?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=hire
  [slack]: https://cowk.io/slack?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=slack
  [linkedin]: https://cowk.io/linkedin?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=linkedin
  [twitter]: https://cowk.io/twitter?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=twitter
  [testimonial]: https://cowk.io/leave-testimonial?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=testimonial
  [office_hours]: https://cloudops.works/office-hours?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=office_hours
  [newsletter]: https://cowk.io/newsletter?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=newsletter
  [email]: https://cowk.io/email?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=email
  [commercial_support]: https://cowk.io/commercial-support?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=commercial_support
  [we_love_open_source]: https://cowk.io/we-love-open-source?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=we_love_open_source
  [terraform_modules]: https://cowk.io/terraform-modules?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=terraform_modules
  [readme_header_img]: https://cloudops.works/readme/header/img
  [readme_header_link]: https://cloudops.works/readme/header/link?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=readme_header_link
  [readme_footer_img]: https://cloudops.works/readme/footer/img
  [readme_footer_link]: https://cloudops.works/readme/footer/link?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=readme_footer_link
  [readme_commercial_support_img]: https://cloudops.works/readme/commercial-support/img
  [readme_commercial_support_link]: https://cloudops.works/readme/commercial-support/link?utm_source=github&utm_medium=readme&utm_campaign=cloudopsworks/terraform-module-aws-acm-certificate&utm_content=readme_commercial_support_link
  [share_twitter]: https://twitter.com/intent/tweet/?text=Terraform+ACM+Certificate+Management&url=https://github.com/cloudopsworks/terraform-module-aws-acm-certificate
  [share_linkedin]: https://www.linkedin.com/shareArticle?mini=true&title=Terraform+ACM+Certificate+Management&url=https://github.com/cloudopsworks/terraform-module-aws-acm-certificate
  [share_reddit]: https://reddit.com/submit/?url=https://github.com/cloudopsworks/terraform-module-aws-acm-certificate
  [share_facebook]: https://facebook.com/sharer/sharer.php?u=https://github.com/cloudopsworks/terraform-module-aws-acm-certificate
  [share_googleplus]: https://plus.google.com/share?url=https://github.com/cloudopsworks/terraform-module-aws-acm-certificate
  [share_email]: mailto:?subject=Terraform+ACM+Certificate+Management&body=https://github.com/cloudopsworks/terraform-module-aws-acm-certificate
  [beacon]: https://ga-beacon.cloudops.works/G-7XWMFVFXZT/cloudopsworks/terraform-module-aws-acm-certificate?pixel&cs=github&cm=readme&an=terraform-module-aws-acm-certificate
